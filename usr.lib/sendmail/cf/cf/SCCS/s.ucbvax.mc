h32056
s 00003/00003/00158
d D 1.38 88/04/09 12:39:51 phil 41 40
c FQ uucp forwarders.
e
s 00008/00007/00153
d D 1.37 88/03/31 22:13:32 phil 40 39
c Added smtpuucp support.
e
s 00002/00000/00158
d D 1.36 87/11/04 16:55:29 phil 39 38
c Added the build information.
e
s 00035/00039/00123
d D 1.35 87/07/15 11:10:26 phil 38 37
c m4 includes now in ../m4
e
s 00018/00020/00144
d D 1.34 87/07/05 20:06:49 phil 37 36
c Added local UUCP host check, rearranged machdep part of rs 0.
e
s 00000/00006/00164
d D 1.33 87/06/30 00:36:21 phil 36 35
c Remove oz.
e
s 00002/00002/00168
d D 1.32 87/05/08 15:49:25 phil 35 34
c Changed foreign_networks into fake_domains, misc cleanup 
c after being hosed by a stray rdist ...
e
s 00015/00035/00155
d D 1.31 87/04/25 23:04:22 phil 34 33
c UUCP hosts now included from separate files; deleted mmdf
c stuff.  Now includes "foreign_networks" include file.
e
s 00001/00000/00189
d D 1.30 87/04/25 20:31:20 phil 33 32
c Added nimzod to cogsci's uucp list.
e
s 00005/00003/00184
d D 1.29 87/04/22 15:10:32 phil 32 31
c Added ames as a cad uucp host.
e
s 00001/00001/00186
d D 1.28 87/02/11 18:10:49 phil 31 30
c Fix S0 to support third level domains.
e
s 00001/00000/00186
d D 1.27 87/01/06 15:12:56 rwh 30 29
c Add hoptoad to cogsci's uucp list.
e
s 00002/00002/00184
d D 1.26 86/10/30 15:49:19 rwh 29 28
c Change arpa's uucp list.
e
s 00002/00001/00184
d D 1.25 86/10/27 14:38:58 rwh 28 27
c Move KIM uucp sites over to ARPA.
e
s 00001/00000/00184
d D 1.24 86/10/17 10:27:38 rwh 27 25
c Add hpldt to cogsci's uucp list.
e
s 00006/00006/00178
d R 1.24 86/09/30 11:36:29 rosen 26 25
c added Jim's subdomain hacks
e
s 00001/00001/00183
d D 1.23 86/09/22 14:13:43 rwh 25 24
c Correct spelling error.
e
s 00006/00000/00178
d D 1.22 86/09/22 14:09:49 rwh 24 22
c Add cogsci uucp conections as alternate.
e
s 00005/00000/00178
d R 1.22 86/09/22 13:40:25 rwh 23 22
c Add uucp alternate for cogsci.
e
s 00000/00012/00178
d D 1.21 86/08/11 11:31:27 bloom 22 21
c berknet mail is now defunct on ucbvax
e
s 00004/00006/00186
d D 1.20 86/07/21 14:52:35 bloom 21 20
c new uucp conection on cad, CC domain uses MX records, fix Berknet routing since
c MX records used
e
s 00002/00002/00190
d D 1.19 86/05/01 18:36:45 bloom 20 18
c use domain name instead of arpanet relay for domain name
e
s 00003/00002/00190
d R 1.19 86/05/01 18:32:42 bloom 19 18
c use domain name instead of arpanet relay for domain name
e
s 00002/00002/00190
d D 1.18 86/02/26 07:46:00 bloom 18 17
c Oz domain no longer used or allowed, start stamping out CC domain
e
s 00012/00008/00180
d D 1.17 86/01/03 12:40:52 bloom 17 16
c add mailer for local versus remote tcp
e
s 00002/00000/00186
d D 1.16 86/01/03 09:33:59 rwh 16 15
c Add two new sites to KIM's uucp list.
e
s 00005/00000/00181
d D 1.15 85/11/21 15:39:52 miriam 15 14
c Include class Q to check for non-uucp sites that should be sent
c via tcp.
e
s 00002/00000/00179
d D 1.14 85/11/20 12:32:25 miriam 14 13
c Put in class Y check of uucp sites.
e
s 00001/00001/00178
d D 1.13 85/11/20 12:05:43 miriam 13 12
c Change decwrl.arpa to decwrl.dec.com
e
s 00002/00002/00177
d D 1.12 85/11/13 17:05:49 miriam 12 11
c Remove the ucb from cad and kim.
e
s 00002/00001/00177
d D 1.11 85/11/12 12:02:32 miriam 11 10
c Correction for .CC handling
e
s 00003/00002/00175
d D 1.10 85/11/08 17:13:58 miriam 10 9
c Include berknet mailer for berknet hosts.
e
s 00007/00000/00170
d D 1.9 85/11/08 10:50:11 miriam 9 8
c Put in third alternate uucp connection.
e
s 00001/00000/00169
d D 1.8 85/10/29 11:18:48 miriam 8 7
c Include nic-registered hosts in class N.
e
s 00001/00000/00168
d D 1.7 85/10/24 10:52:38 miriam 7 6
c Add site to kim's uucp connections.
e
s 00003/00003/00165
d D 1.6 85/10/22 14:03:34 miriam 6 5
c Update uucp connections via ucbcad.
e
s 00000/00003/00168
d D 1.5 85/09/10 11:24:26 rwh 5 4
c Remove mi-cec mhb5a and tekcad from ucbcad's uucp list.
e
s 00006/00005/00165
d D 1.4 85/08/14 10:49:17 miriam 4 3
c Put back in .berkeley.edu stripped because of vax synonyms.
e
s 00001/00001/00169
d D 1.3 85/08/13 16:49:23 miriam 3 2
c Force expansion of ucbvax's proper name.
e
s 00001/00000/00169
d D 1.2 85/08/12 10:42:56 miriam 2 1
c Put in define to prevent suucpm fore repeating rulesets in uucpm.m4.
e
s 00169/00000/00000
d D 1.1 85/08/09 15:55:45 miriam 1 0
c date and time created 85/08/09 15:55:45 by miriam
e
u
U
t
T
I 1
############################################################
#
#  Sendmail
#  Copyright (c) 1983  Eric P. Allman
#  Berkeley, California
#
#  Copyright (c) 1983 Regents of the University of California.
#  All rights reserved.  The Berkeley software License Agreement
#  specifies the terms and conditions for redistribution.
#
#	%W% (Berkeley) %G%
#
I 39
sinclude(buildinfo)dnl
#
E 39
############################################################
############################################################
#####
#####		SENDMAIL CONFIGURATION FILE
#####
#####	This one is the big daddy.  There is no "upstairs"
#####	to bounce a message to -- except perhaps the arpanet.
#####
#####
############################################################
############################################################



######################
###   local info   ###
######################

D 38
# internet hostname
Cwucbvax vax k UCB-VAX Berkeley UCB-C70 UCB LOCAL
E 38
I 38
# internet hostnames
Cwucbvax vax k UCB-VAX Berkeley UCB-C70 UCB
E 38

D 38
# override hostname to use ARPANET name
D 3
DwUCB-VAX
E 3
I 3
#DwUCB-VAX		remove override if using named
E 3

E 38
D 37
# uucp hostnames
E 37
I 37
# UUCP hostnames
E 37
DUucbvax
CUucbvax 

I 37
# local UUCP connections
D 38
include(uucp.ucbvax.m4)dnl
E 38
I 38
D 40
include(../m4/uucp.ucbvax.m4)dnl
E 40
I 40
include(../machdep/uucp.ucbvax.m4)dnl
E 40
E 38

E 37
I 24
D 38
# UUCP connections on cogsci
D 37
DVcogsci
D 25
CVable
E 25
I 25
D 34
CVabel
E 25
CVwell
I 27
CVhpldt
I 30
CVhoptoad
I 33
CVnimzod
E 34
I 34
define(`CW', CV)dnl
E 37
I 37
DWcogsci
E 38
I 38
# UUCP connections on ucbarpa
D 41
DWucbarpa
E 41
I 41
DWucbarpa.Berkeley.EDU
E 41
E 38
define(`CV', CW)dnl
E 37
D 38
include(uucp.cogsci.m4)dnl
undefine(`CW')dnl
E 38
I 38
D 40
include(../m4/uucp.ucbarpa.m4)dnl
E 40
I 40
include(../machdep/uucp.ucbarpa.m4)dnl
E 40
undefine(`CV')dnl
E 38
E 34
E 33
E 30
E 27

E 24
D 22
# berknet hostname
DBUCBVAX

E 22
# UUCP connections on ucbcad
D 12
DWucbcad
E 12
I 12
D 37
DWcad
E 37
I 37
D 41
DXcad
E 41
I 41
DXcad.Berkeley.EDU
E 41
define(`CV', CX)dnl
E 37
E 12
D 6
CWboulder
CWcaddyvax caddyva
E 6
D 32
CWjupiter
E 32
I 32
D 34
CWames
E 32
D 6
CWlblh
E 6
I 6
CWharris
CWhpda
I 32
CWjupiter
E 32
E 6
CWmasscomp masscom
D 5
CWmhb5a
CWmi-cec
E 5
CWsda
I 21
CWstellar
E 21
I 6
CWtektronix
E 34
I 34
D 38
include(uucp.cad.m4)dnl
I 37
undefine(`CW')dnl
E 38
I 38
D 40
include(../m4/uucp.cad.m4)dnl
E 40
I 40
include(../machdep/uucp.cad.m4)dnl
E 40
undefine(`CV')dnl
E 38
E 37
E 34
E 6
D 5
CWtekcad
E 5

D 32
# second alternate UUCP connection and hosts
E 32
I 32
D 38
# UUCP connections on ucbarpa
E 32
D 12
DXucbkim
E 12
I 12
D 28
DXkim
E 28
I 28
D 29
DXarpa
E 29
I 29
D 37
DXucbarpa
E 29
D 34
CXmetron
E 28
E 12
CXfranz
CXfateman
I 7
CXfisi
I 16
CXendotsew
CXfimus
E 16
E 7
D 29

E 29
I 29
CXinterlan
E 34
I 34
define(`CW', CX)dnl
E 37
I 37
DYucbarpa
define(`CW', CY)dnl
E 37
include(uucp.ucbarpa.m4)dnl
undefine(`CW')dnl
E 38
I 38
# UUCP connections on cogsci
D 41
DYcogsci
E 41
I 41
DYcogsci.Berkeley.EDU
E 41
define(`CV', CY)dnl
D 40
include(../m4/uucp.cogsci.m4)dnl
E 40
I 40
include(../machdep/uucp.cogsci.m4)dnl
E 40
undefine(`CV')dnl
E 38
E 34
E 29
I 9
D 32
# third alternate UUCP connection
E 32
I 32

D 36
# UUCP connections on oz
E 32
DYucboz
D 34
CYucbwodan wodan
CYCTSB
CYaloft
CYaltos86
E 34
I 34
define(`CW', CY)dnl
include(uucp.oz.m4)dnl
undefine(`CW')dnl
E 34

E 36
E 9
# known uucp connections with a smart uucp
CMdecvax

# we have full sendmail support here
Oa

#############################
###   Setup Information   ###
#############################

D 38
include(nsmacros.m4)
include(nsclasses.m4)
D 21
include(cchosts.m4)
E 21
I 8
include(nicregistered.m4)
I 15
D 37
include(uucphosts.m4)
E 37
E 15
E 8
D 22
include(berkhosts.m4)
E 22
include(version.m4)
include(boilerplate.m4)
E 38
I 38
include(../m4/nsmacros.m4)
include(../m4/nsclasses.m4)
include(../m4/nicregistered.m4)
include(../m4/version.m4)
include(../m4/boilerplate.m4)
E 38

###########################
###   Rewriting Rules   ###
###########################

D 38
include(prewriterule.m4)
include(postwriterule.m4)
E 38
I 38
include(../m4/prewriterule.m4)
include(../m4/postwriterule.m4)
E 38

# addition to Post-rewrite Rule
R$+%$=w@$=w.EDU		$1@$w			u%UCB@UCB.edu => u@UCB.berk.edu
R$+%$=w@$=w.$=w.EDU	$1@$w			u%UCB@UCB.berk.edu => u@UCB

D 38
include(rule3.m4)
include(rule5.m4)
E 38
I 38
include(../m4/rule3.m4)
include(../m4/rule5.m4)
E 38

###################
###   Mailers   ###
###################

D 38
include(localm.m4)
E 38
I 38
include(../m4/localm.m4)
E 38
I 10
D 22
include(berkm.m4)
E 22
E 10
I 2
define(`m4UUCP',TRUE)
E 2
D 38
include(suucpm.m4)
include(uucpm.m4)
include(nstcpm.m4)
I 17
include(nstcpldm.m4)
E 38
I 38
include(../m4/suucpm.m4)
include(../m4/uucpm.m4)
I 40
include(../m4/smtpuucpm.m4)
E 40
include(../m4/nstcpm.m4)
include(../m4/nstcpldm.m4)
E 38
E 17

#####################
###   Rule Zero   ###
#####################

D 38
include(rule0.m4)
E 38
I 38
include(../m4/rule0.m4)
E 38

################################################
###  Machine dependent part of ruleset zero  ###
################################################
I 15

D 37
# if host is not in the class Q (class of valid uucp hosts), then assume
# it is to be sent via tcp.
R$*<@$*$~Q.UUCP>$*	$1<@$2$[$3$]>$4
I 21
#R$*<@$~Q.UUCP>$*	$1<@$[$2$]>$3
E 37
I 37
D 40
# resolve local UUCP links (done before forwarding uucp mail to
# other machines, since they might have links to hosts that we have
# links to).
E 40
I 40
# resolve SMTP UUCP connections
include(../machdep/smtpuucp.ucbvax.m4)
E 40
E 37
E 21
E 15

I 40
# resolve local UUCP links
E 40
I 37
R<@$=V.UUCP>:$+		$#uucp$@$1$:$1:$2		@host.UUCP: ...
R$+<@$=V.UUCP>		$#uucp$@$2$:$1			user@host.UUCP

E 37
D 34
# resolve explicitly arpanet names (to avoid with machine name "arpa" below)
E 34
I 34
# resolve explicit arpanet names (to avoid with machine name "arpa" below)
E 34
R$*<@$*$-.ARPA>$*	$#tcp$@$3.ARPA$:$1<@$2$3.ARPA>$4	user@domain.ARPA

I 4
D 21
# resolve names destined for the computer center
D 11
R$*<@$+.CC>$*		$#tcp$@$C$:$1<@$2.CC>$3			user@host.CC
E 11
I 11
D 17
R$*<@$=C.berkeley.edu>$*	$#tcp$@$C$:$1<@$2>$3
R$*<@$+.CC>$*		$#tcp$@$C$:$1<@$2>$3			user@host
E 17
I 17
R$*<@$=C.berkeley.edu>$*	$#tcpld$@$C$:$1<@$2>$3
I 18
R$*<@$=C>$*		$#tcpld$@$C$:$1<@$2>$3
E 18
R$*<@$+.CC>$*		$#tcpld$@$C$:$1<@$2>$3			user@host
E 17
E 11

E 21
E 4
D 22
# resolve berknet names
D 10
R<@$=Z>:$+		$#tcp$@$B$:$2@$1			@berkhost: ...
R$+<@$=Z>		$#tcp$@$B$:$1@$2			user@berknethost
E 10
I 10
R<@$=Z>:$+		$#berk$@$1$:$2				@berkhost: ...
I 21
R<@$=Z.berkeley.edu>:$+	$#berk$@$1$:$2				@berkhost: ...
E 21
R$+<@$=Z>		$#berk$@$2$:$1				user@berknethost
I 21
R$+<@$=Z.berkeley.edu>	$#berk$@$2$:$1				user@berknethost
E 21
E 10

E 22
D 4
# resolve names destined for the computer center
R$*<@$+.CC>$*		$#tcp$@$C$:$1<@$2.CC>$3			user@host.CC

E 4
D 34
# resolve explicit known foreign networks
D 18
R$*<@$+.Oz.au>$*	$#tcp$@seismo.css.gov$:$1<@$2.oz>$3	user@host.oz.au
R$*<@$+.Oz>$*		$#tcp$@seismo.css.gov$:$1<@$2.oz>$3	user@host.oz
E 18
I 18
D 22
R$*<@$+.Oz.au>$*	$#tcp$@seismo.css.gov$:$1<@$2.OZ.AU>$3	user@host.oz.au
E 22
E 18
D 17
R$*<@$+.BITNET>$*	$#tcp$@$C$:$1<@$2.BITNET>$3		user@host.BITNET
E 17
I 17
R$*<@$+.BITNET>$*	$#tcpld$@$C$:$1<@$2.BITNET>$3		user@host.BITNET
E 17
R$*<@$+.CSNET>$*	$#tcp$@CSNET-RELAY.ARPA$:$1<@$2.CSNET>$3	user@host.CSNET
D 13
R$*<@$+.DEC>$*		$#tcp$@decwrl.ARPA$:$1<@$2.DEC>$3	user@host.DEC
E 13
I 13
R$*<@$+.DEC>$*		$#tcp$@decwrl.dec.com$:$1<@$2.DEC>$3	user@host.DEC
E 13
R$*<@$+.MailNET>$*	$#tcp$@MIT-Multics.ARPA$:$1<@$2.MailNET>$3	user@host.MailNET
E 34
I 34
D 35
# resolve pseudo-top level domains by forwarding to other hosts
include(foreign_networks.m4)
E 35
I 35
# resolve fake top level domains by forwarding to other hosts
D 38
include(fake_domains.m4)
E 38
I 38
include(../m4/fake_domains.m4)
E 38
E 35
E 34

D 37
# resolve nonlocal UUCP links
I 24
R$*<@$*$=V.UUCP>$*	$#tcpld$@$V$:$1<@$2$3.UUCP>$4	user@host.UUCP
E 37
I 37
# resolve non-local UUCP links
E 37
E 24
D 17
R$*<@$*$=W.UUCP>$*	$#tcp$@$W$:$1<@$2$3.UUCP>$4	user@host.UUCP
R$*<@$*$=X.UUCP>$*	$#tcp$@$X$:$1<@$2$3.UUCP>$4	user@host.UUCP
I 14
R$*<@$*$=Y.UUCP>$*	$#tcp$@$Y$:$1<@$2$3.UUCP>$4	user@host.UUCP
R$*<@$*$=Y>$*		$#tcp$@$Y$:$1<@$2$3.UUCP>$4	user@host.UUCP
E 17
I 17
D 38
R$*<@$*$=W.UUCP>$*	$#tcpld$@$W$:$1<@$2$3.UUCP>$4	user@host.UUCP
R$*<@$*$=X.UUCP>$*	$#tcpld$@$X$:$1<@$2$3.UUCP>$4	user@host.UUCP
R$*<@$*$=Y.UUCP>$*	$#tcpld$@$Y$:$1<@$2$3.UUCP>$4	user@host.UUCP
E 38
I 38
R$*<@$=W.UUCP>$*	$#tcpld$@$W$:$1<@$2.UUCP>$3	user@host.UUCP
R$*<@$=X.UUCP>$*	$#tcpld$@$X$:$1<@$2.UUCP>$3	user@host.UUCP
R$*<@$=Y.UUCP>$*	$#tcpld$@$Y$:$1<@$2.UUCP>$3	user@host.UUCP
E 38
D 37
R$*<@$*$=Y>$*		$#tcpld$@$Y$:$1<@$2$3.UUCP>$4	user@host.UUCP
E 37
E 17
E 14
D 4
R$*<@$*$=Y.UUCP>$*	$#tcp$@$Y$:$1<@$2$3.UUCP>$4	user@host.UUCP
R$*<@$*$=Y>$*		$#tcp$@$Y$:$1<@$2$3.UUCP>$4	user@host.UUCP
E 4

# this uucp stuff is wrong for domain uucp addresses
# - we should pass the whole "host.domain" to uucp so it can
#   find the best route.  But that depends on a uucp router
#   which doesn't exist here yet, so for now, we'll settle for
#   trying to route to the domain (pretending its a host).
#   Suitable L.sys entries can make this work.  If it doesn't
#   then returned mail will just say "dom unknown", which is true ..

# resolve smart UUCP links
R<@$=M.$-.UUCP>:$+	$#suucp$@$2$:@$1.$2.UUCP:$3	@host.domain.UUCP: ...
R<@$=M.UUCP>:$+		$#suucp$@$1$:$2			@host.UUCP: ...
R$+<@$=M.$-.UUCP>	$#suucp$@$3$:$1@$2.$3.UUCP	user@host.domain.UUCP
R$+<@$=M.UUCP>		$#suucp$@$2$:$1			user@host.UUCP
D 37

# resolve local UUCP links (all others)
R<@$+.$-.UUCP>:$+	$#uucp$@$2$:@$1.$2.UUCP:$3	@host.domain.UUCP: ...
R<@$-.UUCP>:$+		$#uucp$@$1$:$2			@host.UUCP: ...
R$+<@$+.$-.UUCP>	$#uucp$@$3$:$1@$2.$3.UUCP	user@host.domain.UUCP
R$+<@$-.UUCP>		$#uucp$@$2$:$1			user@host.UUCP
E 37

D 34
# resolve mmdf hack
D 17
R$+<@UDel-Test>		$#tcp$@ucbarpa$:$1@Udel-Test	user.host@UDel-Relay
E 17
I 17
R$+<@UDel-Test>		$#tcpld$@ucbarpa$:$1@Udel-Test	user.host@UDel-Relay
E 17
I 4

E 34
D 38
# check for local that has had .berkeley.edu stripped by previous rule
D 20
R$*<@$->$*		$1<@$2.$A>$3			user@host-within-this-domain
E 20
I 20
D 34
R$*<@$->$*		$1<@$2.$D>$3			user@host-within-this-domain
E 34
I 34
R$*<@$->$*		$1<@$2.$D>$3			user@local_host
E 34
E 20
I 17

E 38
# local domain sites
D 20
R$*<@$*.berkeley.edu>$*	$#tcpld$@$2$:$1<@$2.$A>$3	user@host.berkeley.edu
E 20
I 20
D 31
R$*<@$*.berkeley.edu>$*	$#tcpld$@$2$:$1<@$2.$D>$3	user@host.berkeley.edu
E 31
I 31
D 34
R$*<@$*.$D>$*		$#tcpld$@$2.$D$:$1<@$2.$D>$3	user@host.berkeley.edu
E 34
I 34
R$*<@$*.$D>$*		$#tcpld$@$2.$D$:$1<@$2.$D>$3	user@host.our.domain
I 38
R$*<@$->$*		$#tcpld$@$2.$D$:$1<@$2.$D>$3	user@host
R$*<@$-.UUCP>$*		$#tcpld$@$2.$D$:$1<@$2.$D>$3	user@host.UUCP
E 38
E 34
E 31
E 20
E 17
E 4

# other non-local names will be kicked upstairs
R$*<@$+>$*		$#tcp$@$2$:$1<@$2>$3		user@some.where

# remaining names must be local
R$+			$#local$:$1			everything else

########################################
###  Host dependent address cleanup  ###
########################################

S8
R$*$=U!$+@$+		$3@$4				drop uucp forward
E 1
